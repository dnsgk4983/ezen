리액트가 자바스크립트 함수의 모음이다 보니
함수표현 방식에 대해 확인했으면 좋겠습니다.

함수 정의식
function hello1() {
    console.log("hi");
}

함수 표현식
let hello1 = function() {
    console.log("hi");
}

화살표함수
let hello1 = () => {
    console.log("hi");
}

<!--  -->
npm run start 를 하시면
localhost:3000
에서 리액트 앱이 실행됩니다.
리액트 실행 포트번호는 3000번이 기본값입니다.

create-react-app 패키지엔 웹서버가 내장되어서
기본값으로 포트번호 3000에서 웹서버가 동작합니다.
처음에 켜면 저런 메세지가 뜹니다. src 폴더의 app.js 내용을 수정하라는 메세지입니다.
Edit src/App.js and save to reload.

리액트는 nodemon 기능이 패시브입니다.

리액트 실행구조의 설명
1. 리액트를 켜면 index.js가 돌아갑니다.
2. app.js의 위치를 부른 후
3. app.js 실행시킵니다. (이후 추가파일을 만들어서 함께 부름)

리액트에서 화면 단위 자바스크립트 혹은 함수 코드는
<App /> 이런식으로 태그와 유사한 형태로 부릅니다.

이번에 할 앱은 숫자데이터를 받아서 리액트에서 숫자 데이터를 처리하여 숫자계산이 가능한 앱입니다.
데이터를 받아 업데이트 하는 리액트 훅스 중
useState 기능이 소개 될 것입니다.

리액트에서는 객체 자료형을 지원하지 않습니다.
객체의 개별요소에 접근하여 구체적인 값을 가져와야합니다.

<!-- 20240507 -->
최상위태그규칙
조건문 등 자바스크립트 코드 바로 적용가능
리액트에서 css적용법 inline style
데이터를 전달하는 props - 파일에서 파일로 데이터 전달법
한 파일에 데이터 변수가 많다면? - 구조분해할당 기법 사용
스프레드 연산자 기능 예시
객체 데이터 셋 안의 값이 배열처리된 경우 사용법?
*** 리액트에서 버튼클릭등과 같은 html 이벤트 처리기능은?
state 상태란 무엇인가??
//
리액트의 코드구조는
index.js에서 관련 설정(성능테스트, 경고메세지 출력 등)을 부르고
app.js를 통해서 화면구성을 실행한다.

app.js에서 메인화면과 각종 화면 컴포넌트를 불러서 웹페이지를 로드한다.
index.js --> app.js (component 하위폴더 생성하여 각종 컴포넌트 관리)

Header.js 를 포함하는 각종 페이지 컨텐츠에 해당하는 컴포넌트 파일들은
전부 첫글자가 대문자가 되어야 합니다.
자바스크립트 네이밍 규칙에서 함수와 객체는 첫글자를 대문자로 가져가고 있었습니다.
리액트에서 이러한 규칙을 잘 지켜야하는 이유는
컴포넌트 첫글자가 소문자로 시작한다면 어떨때 해당 컴포넌트 인식이 안됩니다.
(정상적인 리액트 컨포넌트로 인식하지 않아 리액트의 기능이 안될 수 있음)
자바스크립트 네이밍 규칙과의 일관성 외에도 리액트 컴포넌트를 일반 html 태그와
구분하고자 하는 목적도 가지고 있습니다.

그런데 지금 app.js 안에 컴포넌트를 추가하는것은 바람직한 경우가 아닙니다.
한 파일에 한 컴포넌트가 원칙입니다.
html 태그의 역할을 하는 예를들어 header, footer 이런 태그에 해당하는 컴포넌트들은
반드시 한 파일에 하나씩 만들어 주셔야 합니다. (실행은 됩니다)

참고로 지금처럼 자바스크립트와 html을 섞어 쓰는 것을 jsx라고 부릅니다.
jsx의 장점은 html 태그에서 자바스크립트의 표현식을 직접 사용 할 수 있는 점입니다.
자바스크립트 표현식의 장점은 데이터 처리가 html태그 안에서 가능한 점입니다.

단, 객체 데이터는 지원하지 않습니다.
objA.aaa 객체 안의 key 값을 명시하여 오류를 피하는 것을 프로퍼티 표기법이라 합니다.

최상위 태그규칙:
jsx가 반환하는 모든 태그는 반드시 최상위 태그로 감싸야 합니다.
만약에 div 태그와 같이 css등에 영향을 주는 태그는 피하고 싶을 때
<></> 빈 태그 사용 가능

<!--  -->
컴포넌트: 구성요소, 페이지 컨텐츠 별로 모듈화&재사용
props: 컴포넌트 간의 데이터 전달
ejs 에서 컴마이후 {food: food} 이런식으로 sql에서 받은 데이터를 전달했죠? 유사한 기능입니다.

app.js 상의 데이터를 원하는 위치 컴포넌트로 전달해보겠습니다.
리액트 실행순서
index.js --> app.js --> 개별항목
app.js가 화면 불러오는 가장 근본파일(root 요소)

최상위파일 app.js에 위치한 '풀스택' 이라는 문자 데이터를 body 컨텐츠로 보내서 화면에 출력하고 싶다면?
1. 출력할 컴포넌트에 보낼 데이터를 정의해준다.
2. 해당 컴포넌트는 함수에 받은 데이터를 넣을 인풋이 정의되어야 한다.
3. 받은 데이터와 변수이름을 매칭하여 html 태그에 표시해줍니다.

// props라 쓰면서 전체 데이터셋을 다 가져올 필요 없이
// 받을때 데이터를 선택해서 받을 수 있습니다.
const Body = ({name, location}) 데이터를 명시하던지

아래처럼 데이터셋 전체를 받은 뒤에 사용 할 데이터를 따로 정의해도 됩니다.
const Body = (props);
const {name, location} = props;

객체 데이터 형식이 지원하지 않는다고 하였습니다.
예를 들어
dataset1: = { name7778 : "풀스택", location: "구월동"}
이런 json 형식을 지원하는 객체 데이터셋을 잘 전달하는 방법은 뭘까요?

리액트에서 중요한 점은 데이터를 읽으려고 할 때 못읽게 되면 다른것도 안나오는 경우가 많습니다.
그래서 데이터 전송에 유의하여 주시기 바랍니다.

리액트에서 코딩할 때 데이터를 읽지 못하는 경우는
비동기 처리라던지 혹은 네트워크 에러와 같이 개발자의 실수가 아닌 경우에도 발생할 수 있는 문제입니다.
그래서 데이터가 들어오지 않는 경우 임시로 조치하는 방법이 있습니다.

Body.defaultProps 기능으로 해당 데이터 변수에 기본값을 설정할 수 있습니다.
리액트 기반으로 코딩 할 때, 데이터와의 연계는 안되었지만,
컴포넌트에서 데이터를 받는 기능을 코딩 할 때, 이런식으로 기본값을 설정하여
화면이 안나오는 오류를 방지하며 코딩이 가능합니다.

props 기능은 데이터 뿐 아니라 컴포넌트 그 자체를 전달 가능하다

리액트에서의 이벤트 핸들링
1. 대소문자를 구분합니다 onClick 같이 살짝 달라집니다.
2. onClick = {} 이렇게 props와 유사하게 중괄호가 붙습니다.

이벤트 객체 사용하기 - 이벤트 발생 시 객체를 전달합니다.
배운내용
1. 컴포넌트 (태그 컨텐츠 별로 파일 분리)
2. props (데이터 전달)
3. 이벤트 함수 & 객체 (마우스 클릭같은 이벤트 발생 시 할 일 처리하기)

데이터 전달되고, 함수 켜지고, 모듈화 되니까 어느정도 될 거 같단 생각도 합니다.
현재까지는 값이 변하지 않는 정적인 요소를 만들었습니다.
사용자의 행위나 시간변화에 따른 동적 컴포넌트를 처리할 수 있어야 합니다.

State는 상태라는 뜻인데 사용자 참여나 시간의 변화에 따른 상태변화를 캐치하여 화면에 표시해야합니다.
리액트의 State 사용법 : useState(리액트 훅스 첫번째 기능)
const [score, setScore] = useState(0);
useState를 호출하면 2개의 요소가 담긴 배열을 반환합니다.
배열의 첫번째 요소는 현재상태를 저장하는 변수입니다. 이를 state 변수라 합니다.
배열의 둘째요소는 상태를 업데이트 하는 함수입니다.

body.js : props로 데이터 전달 (데이터 객체 처리법)
리액트는 데이터에러에 취약하다
body22.js : 이벤트 핸들링 함수 (마우스 클릭 혹은 인풋태그변화 등)
body33.js : useState로 이벤트 핸들링 함수 실행시 데이터 업데이트
body44.js : useState로 텍스트 태그 데이터 업데이트
body55.js : useState로 옵션태그 데이터 업데이트

useState는 변수이름이랑 그닥 상관없다. 기능에 맞게 작업하면 된다.
-> 사용자 입력 태그, 숫자, db상 데이터 모두 useState 처리 가능하다.


state와 props를 함께 쓰는 방법을 예시로 들며 마무리하겠습니다.
1. 상태변화는 감점도 가능합니다.
2. body77.js 예제는 유저의 htm내 버튼ㅌ그 클릭 시 이벤트 함수가 실행되며
useState를 통해 상태를 업데이트 합니다.
3. 업데이트 된 상태는 Viewer 컴포넌트에 따로 전달이 되고
4. Viewer 컴포넌트는 상태데이터 score를 가지고 홀수짝수를 삼항영산자로 판단합니다.
5. 판단된 결과는 Viewer 컴포넌트를 로딩하며 보여줍니다.

<!-- 20240508 -->
리액트의 State 사용법: useState 리액트 훅스의 첫번째 기능
useState 없이는 리액트 컨텐츠가 정적 컨텐츠로 남습니다.
유저의 요청과 응답 속 데이터 변화속에 변화된 내용을 담을 수 없기 때문입니다.

초기상태, 현재상태, 변화된상태 3가지를 반영하는것이 useState 입니다.
const [score, setScore] = useState(0);
const [현재점수, 점수변화] = useState(초기점수);

리액트 서비스에서 인풋태그에 뭘 입력하고 버튼을 누르면 mysql db에
입력 내용이 저장되는 프로그램 간단 구현
리액트 + node.js + mysql 연결법은
프론트엔드 사이드(클라이언트사이드) (리액트 + node.js)가
백엔드 사이드(서버사이드)(node.js + mysql)를 ip주소와 포트번호로 연결되어 동작합니다.

예를들어 백엔드 사이드를 node.js를 통해서 포트번호 3001번으로 웹서버를 구축하여 데이터 저장 공간을 만든다면,
포트번호 3000번에 프론트엔드 사이드가 켜지면서 필요한 데이터를 3001번으로 호출해서 불러오는 구조입니다.
이처럼 클라이언트와 서버를 분리하여 코딩하는 방식을 따르게 됩니다.
클라이언트와 서버를 분리하여 코딩을하면 서버사이드 코딩과 요소는
외부에 노출되지 않습니다.

react + mysql 폴더 만드셔서 그 안에다가 npx create-react-app 아무이름을 입력한다.
만든 폴더 가서 그 안에 server라고 폴더하나 만들고 server 폴더에서 npm i -y 합니다.
--> 리액트 폴더안에 서버폴더 만들어서 node.js + mysql로 서버개통

npm install mysql mysql2 express cors

DB연결해서 리액트 틀려면 서버사이드 클라이언트사이드 두 부분의 프로그램을 켜야됩니다.
리액트 할 때 이거 끄면 안됩니다.

풀스택 웹서비스는 서버사이드, 클라이언트 사이드가 모두 활성화 되어야 하며, 서비스 배포 시 별도의 환경이 구축되어야 합니다.

클라이언트 사이드 구현 시작
1. 미사용 코드 삭제
3. 리액트 실행 (클라이언트 사이드) - 포트충돌 여부 확인
4. useState 구현

클라이언트 사이드 + 서버 사이드 모두가 필요합니다.
보안 측면에서 매우 유용합니다. 함부로 데이터에 접근 할 수 없도록
반드시 3001, 3000 모두 켜보세요
3000번 리액트가 3001번을 읽어들여야 하니 서버사이드 먼저 켜세요.

이상 useState + mysql의 연계작업을 해보았습니다.
sql 쿼리는 반드시 사전에 mysql에 넣고 테스트 하세요

진행사항
1. app,viewer, controller 컴포넌트 분리
2. useState 사용 + 주의사항
3. 데이터 전달 이벤트 발생 시 데이터 전달 방향, 이벤트 전달 방향

작업순서
1. 필요없는 코드제거
2. UI 구현 시 컴포넌트 src 폴더 안
    component 폴더 만들어서 코딩하기 (Viewer.js 생성)
3. useState 사용하여 버튼 클릭 시 해당 버튼의 점수만큼 화면 숫자 업데이트

특징 : useState 기능 결과가 컴포넌트끼리 전달되어야 함
이전예제는 한 파일에서 useState 작동했는데 이번 예제는 파일이 나뉩니다.
데이터는 위에서 아래로 흐르고 이벤트는 아래서 위로 전달
-> useState는 App.js에 코딩해야합니다.
클릭 이벤트(유저가 클릭해서 계산될 점수)의 전달방향
--> Controller.js -> App.js

props로 컴포넌트 자체를 전달가능

useEffect 설명하겠습니다.
useEffect 특정 값 변경시 특정코드를 실행시키는 기능입니다.
useEffect를 이용하면 state 상태값이 바뀔때마다 변경된 값을 콘솔에 출력 할 수 있습니다.
데이터는 위에서 아래로 흐르므로 useEffect 역시 app.js에 두는것이 좋습니다.

useEffect( () => {
    console.log("점수 업데이트", count)
}, [count])
[] 안의 데이터가 바귀는 순간, {} 안 코드가 실행됩니다.
그래서 데이터 변화를 모니터링하는 기능을 만듭니다.
{} = 콜백함수 [] = 의존성 배열
배열은 여러변수를 가질 수 있습니다.
배열 내 데이터 하나라도 바뀌면 콜백함수가 실행됩니다.
--> useState 여러개 걸려도 잘 쓸 수 있다.

게시판 TO-DO List 앱:
날짜데이터, CRUD API (데이터의 추가, 삭제, 조회)
검색기능 추가
useRef가 소개됩니다.

<!-- 20240509 -->
(화면설계 후 구도 -> urlmap에 해당하는 개별 페이지 -> 데이터 전송 -> css)
### 새로 만드는 상황
1. 어떤 컴포넌트로 구분할지 간단히 표시
2. app.js 전체 css 적용
3. 구분자로 넣은 임시 컨텐츠에 해당하는 컴포넌트 추가
(1) Header.js - 날짜 데이터 추가
(2) TodoEditor - 할일 데이터 작성 후 추가
(3) TodoList - 할 일 리스트를 보여준다.
(4) TodoItem - 개별 할 일 데이터를 위한 컴포넌트
데이터 만큼 TodoItem 출력 개수가 달라져야 함
검색기능 미구현
입력하면 데이터가 들어가야함
버튼 클릭해서 삭제 할 내용을 정하면 삭제도 되어야한다.

1) app.js에 useState 정의 : 할 일 데이터 = 문자열
데이터 형태를 생각 : 데이터의 구성은
1-1) 할 일 내용 2) 날짜 3) 고유 id --> key & value의 json 형식이 될 것
1-2) 테스트 데이터를 정의 후 테스트 데이터로 코딩해서 되는지 확인
테스트 데이터 만들고 나서 데이터를 읽어서 표시하는 함수가 필요하다.
데이터 추가 함수를 만들고 todoEditor에 props로 전달함
데이터 혹은 함수를 전달받은 쪽은 인풋값을 정의한 후에 사용 할 수 있다.
f12 -> components 탭에서 state가 인풋값을 받는지 확인하기
데이터를 받는걸 확인했다면 받은 데이터를 화면에 표시함수 구현
게시판에서는 빈 입력값이 들어가지 않게 해야함

4. useState 등 데이터 흐름 추가

리액트는 props로 함수를 못바으면 함수가 정의되지 않았다고 다소 모호한 에러메세지를 보입니다.
함수 자체의 문제인지 함수를 승계받지 못한건지 화면만 보고 알기 어렵습니다.

그래서 함수를 만들고 나서 단계별로 테스트하고 넘어가실것을 추천합니다.
함수가 만들어진것을 보고 props로 넘겨야합니다.

6. 검색기능 추가
state로 만듭니다. 문자열 데이터를 받아서 state상 일치하는 게시글을 부릅니다.

7. 개별 컴포넌트 css 추가

리액트는 SPA(single page application)
페이지 처음 로딩 시 html 하나로 됩니다.
처음 로딩할 때 느려도 페이지 이동 시 속도가 빠릅니다.